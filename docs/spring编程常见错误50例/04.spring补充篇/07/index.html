<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="/logo.png" />
    <link rel="stylesheet" href="/blog-java/umi.3ec1f225.css" />
    <script>
      window.routerBase = "/blog-java";
    </script>
    <script>
      //! umi version: 3.5.41
    </script>
    <script>
      !(function () {
        var e =
            navigator.cookieEnabled && void 0 !== window.localStorage
              ? localStorage.getItem("dumi:prefers-color")
              : "auto",
          o = window.matchMedia("(prefers-color-scheme: dark)").matches,
          t = ["light", "dark", "auto"];
        document.documentElement.setAttribute(
          "data-prefers-color",
          e === t[2] ? (o ? t[1] : t[0]) : t.indexOf(e) > -1 ? e : t[0]
        );
      })();
    </script>
    <title>知识回顾 | 系统梳理Spring编程错误根源 - 大师兄</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-route="/spring编程常见错误50例/04.spring补充篇/07" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;/logo.png&#x27;)" href="/blog-java/">大师兄</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><span>java开发<ul><li><a href="/blog-java/java业务开发常见错误100例">java业务开发常见错误100例</a></li><li><a href="/blog-java/java并发编程实战">java并发编程实战</a></li><li><a href="/blog-java/java性能调优实战">java性能调优实战</a></li><li><a href="/blog-java/java核心技术面试精讲">java核心技术面试精讲</a></li><li><a aria-current="page" class="active" href="/blog-java/spring编程常见错误50例">spring编程常见错误50例</a></li><li><a href="/blog-java/深入剖析java新特性">深入剖析java新特性</a></li><li><a href="/blog-java/深入拆解java虚拟机">深入拆解java虚拟机</a></li></ul></span><span>架构师<ul><li><a href="/blog-java/rpc实战与核心原理">rpc实战与核心原理</a></li><li><a href="/blog-java/从0开始学微服务">从0开始学微服务</a></li></ul></span><div class="__dumi-default-navbar-tool"><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "></div></div></div></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;/logo.png&#x27;)" href="/blog-java/"></a><h1>大师兄</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li>java开发<ul><li><a href="/blog-java/java业务开发常见错误100例">java业务开发常见错误100例</a></li><li><a href="/blog-java/java并发编程实战">java并发编程实战</a></li><li><a href="/blog-java/java性能调优实战">java性能调优实战</a></li><li><a href="/blog-java/java核心技术面试精讲">java核心技术面试精讲</a></li><li><a aria-current="page" class="active" href="/blog-java/spring编程常见错误50例">spring编程常见错误50例</a></li><li><a href="/blog-java/深入剖析java新特性">深入剖析java新特性</a></li><li><a href="/blog-java/深入拆解java虚拟机">深入拆解java虚拟机</a></li></ul></li><li>架构师<ul><li><a href="/blog-java/rpc实战与核心原理">rpc实战与核心原理</a></li><li><a href="/blog-java/从0开始学微服务">从0开始学微服务</a></li></ul></li></ul><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "><button title="Dark theme" class="__dumi-default-dark-moon "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3854" width="22" height="22"><path d="M991.816611 674.909091a69.166545 69.166545 0 0 0-51.665455-23.272727 70.795636 70.795636 0 0 0-27.438545 5.585454A415.674182 415.674182 0 0 1 754.993338 698.181818c-209.594182 0-393.472-184.785455-393.472-395.636363 0-52.363636 38.539636-119.621818 69.515637-173.614546 4.887273-8.610909 9.634909-16.756364 14.103272-24.901818A69.818182 69.818182 0 0 0 384.631156 0a70.842182 70.842182 0 0 0-27.438545 5.585455C161.678429 90.298182 14.362065 307.898182 14.362065 512c0 282.298182 238.824727 512 532.38691 512a522.286545 522.286545 0 0 0 453.957818-268.334545A69.818182 69.818182 0 0 0 991.816611 674.909091zM546.679156 954.181818c-248.785455 0-462.941091-192-462.941091-442.181818 0-186.647273 140.637091-372.829091 300.939637-442.181818-36.817455 65.629091-92.578909 151.970909-92.578909 232.727273 0 250.181818 214.109091 465.454545 462.917818 465.454545a488.331636 488.331636 0 0 0 185.181091-46.545455 453.003636 453.003636 0 0 1-393.565091 232.727273z m103.656728-669.323636l-14.266182 83.781818a34.909091 34.909091 0 0 0 50.362182 36.770909l74.775272-39.563636 74.752 39.563636a36.142545 36.142545 0 0 0 16.174546 3.956364 34.909091 34.909091 0 0 0 34.210909-40.727273l-14.289455-83.781818 60.509091-59.345455a35.025455 35.025455 0 0 0-19.223272-59.578182l-83.61891-12.101818-37.376-76.101818a34.56 34.56 0 0 0-62.254545 0l-37.376 76.101818-83.618909 12.101818a34.909091 34.909091 0 0 0-19.246546 59.578182z m70.423272-64.698182a34.280727 34.280727 0 0 0 26.135273-19.083636l14.312727-29.090909 14.336 29.090909a34.257455 34.257455 0 0 0 26.135273 19.083636l32.046546 4.887273-23.272728 22.574545a35.234909 35.234909 0 0 0-10.007272 30.952727l5.46909 32.116364-28.625454-15.127273a34.490182 34.490182 0 0 0-32.302546 0l-28.695272 15.127273 5.469091-32.116364a35.141818 35.141818 0 0 0-9.984-30.952727l-23.272728-22.574545z" p-id="3855"></path></svg></button><button title="Light theme" class="__dumi-default-dark-sun "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4026" width="22" height="22"><path d="M915.2 476.16h-43.968c-24.704 0-44.736 16-44.736 35.84s20.032 35.904 44.736 35.904H915.2c24.768 0 44.8-16.064 44.8-35.904s-20.032-35.84-44.8-35.84zM512 265.6c-136.704 0-246.464 109.824-246.464 246.4 0 136.704 109.76 246.464 246.464 246.464S758.4 648.704 758.4 512c0-136.576-109.696-246.4-246.4-246.4z m0 425.6c-99.008 0-179.2-80.128-179.2-179.2 0-98.944 80.192-179.2 179.2-179.2S691.2 413.056 691.2 512c0 99.072-80.192 179.2-179.2 179.2zM197.44 512c0-19.84-19.136-35.84-43.904-35.84H108.8c-24.768 0-44.8 16-44.8 35.84s20.032 35.904 44.8 35.904h44.736c24.768 0 43.904-16.064 43.904-35.904zM512 198.464c19.776 0 35.84-20.032 35.84-44.8v-44.8C547.84 84.032 531.84 64 512 64s-35.904 20.032-35.904 44.8v44.8c0 24.768 16.128 44.864 35.904 44.864z m0 627.136c-19.776 0-35.904 20.032-35.904 44.8v44.736C476.096 940.032 492.16 960 512 960s35.84-20.032 35.84-44.8v-44.736c0-24.768-16.064-44.864-35.84-44.864z m329.92-592.832c17.472-17.536 20.288-43.072 6.4-57.024-14.016-14.016-39.488-11.2-57.024 6.336-4.736 4.864-26.496 26.496-31.36 31.36-17.472 17.472-20.288 43.008-6.336 57.024 13.952 14.016 39.488 11.2 57.024-6.336 4.8-4.864 26.496-26.56 31.296-31.36zM213.376 759.936c-4.864 4.8-26.56 26.624-31.36 31.36-17.472 17.472-20.288 42.944-6.4 56.96 14.016 13.952 39.552 11.2 57.024-6.336 4.8-4.736 26.56-26.496 31.36-31.36 17.472-17.472 20.288-43.008 6.336-56.96-14.016-13.952-39.552-11.072-56.96 6.336z m19.328-577.92c-17.536-17.536-43.008-20.352-57.024-6.336-14.08 14.016-11.136 39.488 6.336 57.024 4.864 4.864 26.496 26.56 31.36 31.424 17.536 17.408 43.008 20.288 56.96 6.336 14.016-14.016 11.264-39.488-6.336-57.024-4.736-4.864-26.496-26.56-31.296-31.424z m527.168 628.608c4.864 4.864 26.624 26.624 31.36 31.424 17.536 17.408 43.072 20.224 57.088 6.336 13.952-14.016 11.072-39.552-6.4-57.024-4.864-4.8-26.56-26.496-31.36-31.36-17.472-17.408-43.072-20.288-57.024-6.336-13.952 14.016-11.008 39.488 6.336 56.96z" p-id="4027"></path></svg></button><button title="Default to system" class="__dumi-default-dark-auto "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11002" width="22" height="22"><path d="M127.658667 492.885333c0-51.882667 10.24-101.717333 30.378666-149.162666s47.786667-88.064 81.92-122.538667 75.093333-61.781333 122.538667-81.92 96.938667-30.378667 149.162667-30.378667 101.717333 10.24 149.162666 30.378667 88.405333 47.786667 122.88 81.92 61.781333 75.093333 81.92 122.538667 30.378667 96.938667 30.378667 149.162666-10.24 101.717333-30.378667 149.162667-47.786667 88.405333-81.92 122.88-75.093333 61.781333-122.88 81.92-97.28 30.378667-149.162666 30.378667-101.717333-10.24-149.162667-30.378667-88.064-47.786667-122.538667-81.92-61.781333-75.093333-81.92-122.88-30.378667-96.938667-30.378666-149.162667z m329.045333 0c0 130.048 13.994667 244.394667 41.984 343.381334h12.970667c46.762667 0 91.136-9.216 133.461333-27.306667s78.848-42.666667 109.568-73.386667 54.954667-67.242667 73.386667-109.568 27.306667-86.698667 27.306666-133.461333c0-46.421333-9.216-90.794667-27.306666-133.12s-42.666667-78.848-73.386667-109.568-67.242667-54.954667-109.568-73.386667-86.698667-27.306667-133.461333-27.306666h-11.605334c-28.672 123.562667-43.349333 237.909333-43.349333 343.722666z" p-id="11003"></path></svg></button></div></div></div><ul class="__dumi-default-menu-list"><li><a href="/blog-java/spring编程常见错误50例">spring编程常见错误50例</a></li><li><a href="/blog-java/spring编程常见错误50例/01.课前必读">01.课前必读</a><ul><li><a href="/blog-java/spring编程常见错误50例/01.课前必读/01"><span>开篇词｜贴心“保姆”Spring罢工了怎么办？</span></a></li></ul></li><li><a href="/blog-java/spring编程常见错误50例/02.spring-core篇">02.SpringCore篇</a><ul><li><a href="/blog-java/spring编程常见错误50例/02.spring-core篇/01"><span>导读｜5分钟轻松了解Spring基础知识</span></a></li><li><a href="/blog-java/spring编程常见错误50例/02.spring-core篇/02"><span>01｜Spring Bean 定义常见错误</span></a></li><li><a href="/blog-java/spring编程常见错误50例/02.spring-core篇/03"><span>02｜Spring Bean 依赖注入常见错误（上）</span></a></li><li><a href="/blog-java/spring编程常见错误50例/02.spring-core篇/04"><span>03｜Spring Bean 依赖注入常见错误（下）</span></a></li><li><a href="/blog-java/spring编程常见错误50例/02.spring-core篇/05"><span>04｜Spring Bean 生命周期常见错误</span></a></li><li><a href="/blog-java/spring编程常见错误50例/02.spring-core篇/06"><span>05｜Spring AOP 常见错误（上）</span></a></li><li><a href="/blog-java/spring编程常见错误50例/02.spring-core篇/07"><span>06｜Spring AOP 常见错误（下）</span></a></li><li><a href="/blog-java/spring编程常见错误50例/02.spring-core篇/08"><span>07｜Spring事件常见错误</span></a></li><li><a href="/blog-java/spring编程常见错误50例/02.spring-core篇/09"><span>08｜答疑现场：Spring Core 篇思考题合集</span></a></li></ul></li><li><a href="/blog-java/spring编程常见错误50例/03.spring-web篇">03.SpringWeb篇</a><ul><li><a href="/blog-java/spring编程常见错误50例/03.spring-web篇/01"><span>导读｜5分钟轻松了解一个HTTP请求的处理过程</span></a></li><li><a href="/blog-java/spring编程常见错误50例/03.spring-web篇/02"><span>09｜Spring Web URL 解析常见错误</span></a></li><li><a href="/blog-java/spring编程常见错误50例/03.spring-web篇/03"><span>10 | Spring Web Header 解析常见错误</span></a></li><li><a href="/blog-java/spring编程常见错误50例/03.spring-web篇/04"><span>11 | Spring Web Body 转化常见错误</span></a></li><li><a href="/blog-java/spring编程常见错误50例/03.spring-web篇/05"><span>12｜Spring Web 参数验证常见错误</span></a></li><li><a href="/blog-java/spring编程常见错误50例/03.spring-web篇/06"><span>13 | Spring Web 过滤器使用常见错误（上）</span></a></li><li><a href="/blog-java/spring编程常见错误50例/03.spring-web篇/07"><span>14 | Spring Web 过滤器使用常见错误（下）</span></a></li><li><a href="/blog-java/spring编程常见错误50例/03.spring-web篇/08"><span>15 | Spring Security 常见错误</span></a></li><li><a href="/blog-java/spring编程常见错误50例/03.spring-web篇/09"><span>16｜Spring Exception 常见错误</span></a></li><li><a href="/blog-java/spring编程常见错误50例/03.spring-web篇/10"><span>17｜答疑现场：Spring Web 篇思考题合集</span></a></li></ul></li><li><a aria-current="page" class="active" href="/blog-java/spring编程常见错误50例/04.spring补充篇">04.Spring补充篇</a><ul><li><a href="/blog-java/spring编程常见错误50例/04.spring补充篇/01"><span>18 | Spring Data 常见错误</span></a></li><li><a href="/blog-java/spring编程常见错误50例/04.spring补充篇/02"><span>19 | Spring 事务常见错误（上）</span></a></li><li><a href="/blog-java/spring编程常见错误50例/04.spring补充篇/03"><span>20 | Spring 事务常见错误（下）</span></a></li><li><a href="/blog-java/spring编程常见错误50例/04.spring补充篇/04"><span>21 | Spring Rest Template 常见错误</span></a></li><li><a href="/blog-java/spring编程常见错误50例/04.spring补充篇/05"><span>22 | Spring Test 常见错误</span></a></li><li><a href="/blog-java/spring编程常见错误50例/04.spring补充篇/06"><span>23｜答疑现场：Spring 补充篇思考题合集</span></a></li><li><a aria-current="page" class="active" href="/blog-java/spring编程常见错误50例/04.spring补充篇/07"><span>知识回顾 | 系统梳理Spring编程错误根源</span></a></li></ul></li><li><a href="/blog-java/spring编程常见错误50例/05.结束语">05.结束语</a><ul><li><a href="/blog-java/spring编程常见错误50例/05.结束语/01"><span>结束语｜问题总比解决办法多</span></a></li></ul></li><li><a href="/blog-java/spring编程常见错误50例/06.期末测试">06.期末测试</a><ul><li><a href="/blog-java/spring编程常见错误50例/06.期末测试/01"><span>期末测试｜来赴一场100分之约！</span></a></li></ul></li><li><a href="/blog-java/spring编程常见错误50例/summary">spring编程常见错误50例</a></li></ul></div></div><ul role="slug-list" class="__dumi-default-layout-toc"><li title="隐式规则的存在" data-depth="2"><a href="/blog-java/spring编程常见错误50例/04.spring补充篇/07#隐式规则的存在"><span>隐式规则的存在</span></a></li><li title="默认配置不合理" data-depth="2"><a href="/blog-java/spring编程常见错误50例/04.spring补充篇/07#默认配置不合理"><span>默认配置不合理</span></a></li><li title="追求奇技淫巧" data-depth="2"><a href="/blog-java/spring编程常见错误50例/04.spring补充篇/07#追求奇技淫巧"><span>追求奇技淫巧</span></a></li><li title="理所当然地使用" data-depth="2"><a href="/blog-java/spring编程常见错误50例/04.spring补充篇/07#理所当然地使用"><span>理所当然地使用</span></a></li><li title="无关的依赖变动" data-depth="2"><a href="/blog-java/spring编程常见错误50例/04.spring补充篇/07#无关的依赖变动"><span>无关的依赖变动</span></a></li><li title="通用错误" data-depth="2"><a href="/blog-java/spring编程常见错误50例/04.spring补充篇/07#通用错误"><span>通用错误</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="知识回顾--系统梳理spring编程错误根源"><a aria-hidden="true" tabindex="-1" href="/blog-java/spring编程常见错误50例/04.spring补充篇/07#知识回顾--系统梳理spring编程错误根源"><span class="icon icon-link"></span></a>知识回顾 | 系统梳理Spring编程错误根源</h1><p>你好，我是傅健。</p><p>前面，我们介绍了50个各式各样的问题，在正式结束课程之前，我觉得有必要带着你去梳理下或者说复盘下问题出现的原因。错误的表现千万种，但是如果追根溯源的话，其实根源不会太多。</p><p>当然可能有的同学会把所有的问题都简单粗暴地归结为“学艺不精”，但是除了这个明显的原因外，我想你还是应该深入思考下，最起码，假设是Spring本身就很容易让人犯的错误，你至少是有意识的。那么接下来，我们就来梳理下关于Spring使用中常见的一些错误根源。</p><h2 id="隐式规则的存在"><a aria-hidden="true" tabindex="-1" href="/blog-java/spring编程常见错误50例/04.spring补充篇/07#隐式规则的存在"><span class="icon icon-link"></span></a>隐式规则的存在</h2><p>要想使用好 Spring，你就一<strong>定要了解它的一些潜规则</strong>，例如默认扫描Bean的范围、自动装配构造器等等。如果我们不了解这些规则，大多情况下虽然也能工作，但是稍微变化，则可能完全失效，例如在<a target="_blank" rel="noopener noreferrer" href="https://time.geekbang.org/column/article/364761">第1课<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的案例1中，我们使用 Spring Boot 来快速构建了一个简易的 Web 版 HelloWorld：</p><p><img src="data:image/png;base64,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" alt=""/></p><p>其中，负责启动程序的 Application 类定义如下：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">package com.spring.puzzle.class1.example1.application</span></div><div class="token-line"><span class="token plain">    //省略 import</span></div><div class="token-line"><span class="token plain">    @SpringBootApplication</span></div><div class="token-line"><span class="token plain">    public class Application {</span></div><div class="token-line"><span class="token plain">        public static void main(String[] args) {</span></div><div class="token-line"><span class="token plain">            SpringApplication.run(Application.class, args);</span></div><div class="token-line"><span class="token plain">        }</span></div><div class="token-line"><span class="token plain">    }</span></div></pre></div><p>提供接口的 HelloWorldController 代码如下：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">package com.spring.puzzle.class1.example1.application</span></div><div class="token-line"><span class="token plain">    //省略 import</span></div><div class="token-line"><span class="token plain">    @RestController</span></div><div class="token-line"><span class="token plain">    public class HelloWorldController {</span></div><div class="token-line"><span class="token plain">        @RequestMapping(path = &quot;hi&quot;, method = RequestMethod.GET)</span></div><div class="token-line"><span class="token plain">        public String hi(){</span></div><div class="token-line"><span class="token plain">             return &quot;helloworld&quot;;</span></div><div class="token-line"><span class="token plain">        };</span></div><div class="token-line"><span class="token plain">    }</span></div></pre></div><p>但是，假设有一天，当我们需要添加多个类似的 Controller，同时又希望用更清晰的包层次结构来管理时，我们可能会去单独建立一个独立于 application 包之外的 Controller 包，并调整类的位置。调整后结构示意如下：</p><p><img src="data:image/png;base64,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" alt=""/></p><p>这样就会工作不起来了，追根溯源，你可能忽略了Sping Boot中@SpringBootApplication是有一个默认的扫描包范围的。这就是一个隐私规则。如果你原本不知道，那么犯错概率还是很高的。类似的案例这里不再赘述。</p><h2 id="默认配置不合理"><a aria-hidden="true" tabindex="-1" href="/blog-java/spring编程常见错误50例/04.spring补充篇/07#默认配置不合理"><span class="icon icon-link"></span></a>默认配置不合理</h2><p>除了上述原因以外，还有一个很重要的因素在于，Spring默认的配置不见得是合理的。</p><p>你可以思考这样一个问题，如果让我们写一个框架，我们最大的追求肯定是让用户“快速上手”，这样才好推广。所以我们肯定不会去写一堆配置，而是采用默认值的方式。但是这里面你提出的默认值一定是用户需要的么？未必。这时候，你可能会妥协地满足80%的用户使用场景。所以在使用时，你一定要考虑自己是不是那多余的20%。</p><p>一起复习这样一个的案例，在<a target="_blank" rel="noopener noreferrer" href="https://time.geekbang.org/column/article/380565">第18课<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的案例2中，当我们什么都不去配置，而是直接使用 Spring Data Cassandra 来操作时，我们实际依赖了 Cassandra driver 内部的配置文件，具体目录如下：</p><blockquote><p>.m2\repository\com\datastax\oss\java-driver-core\4.6.1\java-driver-core-4.6.1.jar!\reference.conf</p></blockquote><p>我们可以看下它存在很多默认的配置，其中一项很重要的配置是 Consistency，在 driver 中默认为 LOCAL_ONE，具体如下：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">basic.request {</span></div><div class="token-line"><span class="token plain">     </span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">      # The consistency level.</span></div><div class="token-line"><span class="token plain">      #</span></div><div class="token-line"><span class="token plain">      # Required: yes</span></div><div class="token-line"><span class="token plain">      # Modifiable at runtime: yes, the new value will be used for requests issued after the change.</span></div><div class="token-line"><span class="token plain">      # Overridable in a profile: yes</span></div><div class="token-line"><span class="token plain">      consistency = LOCAL_ONE</span></div><div class="token-line"><span class="token plain">     </span></div><div class="token-line"><span class="token plain">    //省略其他非关键配置 </span></div><div class="token-line"><span class="token plain">    }</span></div></pre></div><p>当你第一次学习和应用 Cassandra 时，你一定会先只装一台机器玩玩。此时，设置为 LOCAL_ONE 其实是最合适的，也正因为只有一台机器，你的读写都只能命中一台。这样的话，读写是完全没有问题的。</p><p>但是产线上的 Cassandra 大多都是多数据中心多节点的，备份数大于1。所以读写都用 LOCAL_ONE 就会出现问题。所以这样说，你就理解了我要表达的意思了吧？Spring采用了一堆默认配置有其原因，但不见得适合你的情况。</p><h2 id="追求奇技淫巧"><a aria-hidden="true" tabindex="-1" href="/blog-java/spring编程常见错误50例/04.spring补充篇/07#追求奇技淫巧"><span class="icon icon-link"></span></a>追求奇技淫巧</h2><p>Spring给我们提供了很多易用的可能，然后有时候，你用着用着会觉得，Spring怎么用都能工作起来，特别是你在网上看到了一些更简洁高效的写法之后，你会觉得惊喜，原来这样也可以。但是Spring真的是无所不能地随意使用么？</p><p>这里让我们快速回顾下<a target="_blank" rel="noopener noreferrer" href="https://time.geekbang.org/column/article/373215">第9课<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的案例2，我们常常使用@RequestParam 和@PathVarible 来获取请求参数（request parameters）以及 path 中的部分。但是在频繁使用这些参数时，不知道你有没有觉得它们的使用方式并不友好，例如我们去获取一个请求参数 name，我们会定义如下：</p><blockquote><p>@RequestParam(&quot;name&quot;) String name</p></blockquote><p>此时，我们会发现变量名称大概率会被定义成 RequestParam值。所以我们是不是可以用下面这种方式来定义：</p><blockquote><p>@RequestParam String name</p></blockquote><p>这种方式确实是可以的，本地测试也能通过。这里我给出了完整的代码，你可以感受下这两者的区别：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">@RequestMapping(path = &quot;/hi1&quot;, method = RequestMethod.GET)</span></div><div class="token-line"><span class="token plain">    public String hi1(@RequestParam(&quot;name&quot;) String name){</span></div><div class="token-line"><span class="token plain">        return name;</span></div><div class="token-line"><span class="token plain">    };</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    @RequestMapping(path = &quot;/hi2&quot;, method = RequestMethod.GET)</span></div><div class="token-line"><span class="token plain">    public String hi2(@RequestParam String name){</span></div><div class="token-line"><span class="token plain">        return name;</span></div><div class="token-line"><span class="token plain">    };</span></div></pre></div><p>很明显，对于喜欢追究极致简洁的同学来说，这个酷炫的功能是一个福音。但当我们换一个项目时，有可能上线后就失效了，然后报错 500，提示匹配不上。</p><p>这个案例的原因，我就不复述了，我只是想说，通过这个案例，你要明白Spring虽然强大，看起来怎么都能玩转，但是实际并非一定如此。</p><h2 id="理所当然地使用"><a aria-hidden="true" tabindex="-1" href="/blog-java/spring编程常见错误50例/04.spring补充篇/07#理所当然地使用"><span class="icon icon-link"></span></a>理所当然地使用</h2><p>在使用Spring框架时，有时候，我们会不假思索地随意下结论。例如，我们在处理HTTP Header遇到需要处理多个Header时，我们第一反映是使用一个HashMap来接收，但是会满足所有情况么？让我们快速回顾下<a target="_blank" rel="noopener noreferrer" href="https://time.geekbang.org/column/article/373942">第10课<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的案例1。</p><p>在 Spring 中解析 Header 时，我们在多数场合中是直接按需解析的。例如，我们想使用一个名为myHeaderName的 Header，我们会书写代码如下：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">@RequestMapping(path = &quot;/hi&quot;, method = RequestMethod.GET)</span></div><div class="token-line"><span class="token plain">    public String hi(@RequestHeader(&quot;myHeaderName&quot;) String name){</span></div><div class="token-line"><span class="token plain">       //省略 body 处理</span></div><div class="token-line"><span class="token plain">    };</span></div></pre></div><p>定义一个参数，标记上@RequestHeader，指定要解析的 Header 名即可。但是假设我们需要解析的 Header 很多时，按照上面的方式很明显会使得参数越来越多。在这种情况下，我们一般都会使用 Map 去把所有的 Header 都接收到，然后直接对 Map 进行处理。于是我们可能会写出下面的代码：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">@RequestMapping(path = &quot;/hi1&quot;, method = RequestMethod.GET)</span></div><div class="token-line"><span class="token plain">    public String hi1(@RequestHeader() Map map){</span></div><div class="token-line"><span class="token plain">        return map.toString();</span></div><div class="token-line"><span class="token plain">    };</span></div></pre></div><p>粗略测试程序，你会发现一切都很好。而且上面的代码也符合针对接口编程的范式，即使用了 Map 这个接口类型。但是上面的接口定义在遇到下面的请求时，就会超出预期。请求如下：</p><blockquote><p>GET <a target="_blank" rel="noopener noreferrer" href="http://localhost:8080/hi1">http://localhost:8080/hi1<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><br/>myheader: h1<br/>myheader: h2</p></blockquote><p>这里存在一个 Header 名为 myHeader，不过这个 Header 有两个值。此时我们执行请求，会发现返回的结果并不能将这两个值如数返回。结果示例如下：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">{myheader=h1, host=localhost:8080, connection=Keep-Alive, user-agent=Apache-HttpClient/4.5.12 (Java/11.0.6), accept-encoding=gzip,deflate}</span></div></pre></div><p>实际上，<strong>要完整接收到所有的 Header，不能直接使用Map而应该使用MultiValueMap。</strong></p><p>借着这个案例，可以思考下你为什么会出错？因为你肯定知道要用一个Map来接收，也相信一定可以，但是你可能疏忽了你用的Map是Spring给你返回的Map。所以有时候，一些“理所当然”的结论其实是错误的。一定要大胆假设、小心求证，才能规避很多问题。</p><h2 id="无关的依赖变动"><a aria-hidden="true" tabindex="-1" href="/blog-java/spring编程常见错误50例/04.spring补充篇/07#无关的依赖变动"><span class="icon icon-link"></span></a>无关的依赖变动</h2><p>Spring依赖了大量的其他组件来协同完成功能，但是完成同一个功能的组件却可能存在多种工具，例如Spring完成JSON操作，既可以依赖Gson，也可以依赖Jackson。更可怕的是Spring往往是动态依赖的，即优先看看优选的工具是否存在，存在则用，不存在才看其他依赖的工具类型是否存在。这样的逻辑会导致项目的依赖不同时，依赖的工具也不同，从而引发一些微妙的行为“变化”。</p><p>我们可以快速复习下<a target="_blank" rel="noopener noreferrer" href="https://time.geekbang.org/column/article/374654">第11课<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的案例2，首先看下面这段代码：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">@RestController</span></div><div class="token-line"><span class="token plain">    public class HelloController {</span></div><div class="token-line"><span class="token plain">        </span></div><div class="token-line"><span class="token plain">        @PostMapping(&quot;/hi2&quot;)</span></div><div class="token-line"><span class="token plain">        public Student hi2(@RequestBody Student student) {</span></div><div class="token-line"><span class="token plain">            return student;</span></div><div class="token-line"><span class="token plain">        }</span></div><div class="token-line"><span class="token plain">        </span></div><div class="token-line"><span class="token plain">    }</span></div></pre></div><p>这段代码接收了一个 Student 对象，然后原样返回。我们使用下面的测试请求进行测试：</p><blockquote><p>POST <a target="_blank" rel="noopener noreferrer" href="http://localhost:8080/springmvc3_war/app/hi2">http://localhost:8080/springmvc3_war/app/hi2<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><br/>Content-Type: application/json<br/>{<br/>&quot;name&quot;: &quot;xiaoming&quot;<br/>}</p></blockquote><p>经过测试，我们会得到以下结果：</p><blockquote><p>{<br/>&quot;name&quot;: &quot;xiaoming&quot;<br/>}</p></blockquote><p>但是随着项目的推进，在代码并未改变时，我们可能会返回以下结果：</p><blockquote><p> <br/>{<br/>&quot;name&quot;: &quot;xiaoming&quot;,<br/>&quot;age&quot;: null<br/>}</p></blockquote><p>即当 age 取不到值，开始并没有序列化它作为响应 Body 的一部分，后来又序列化成 null 作为 Body 返回了。</p><p>如果我们发现上述问题，那么很有可能是上述描述的依赖变动造成的。具体而言，在后续的代码开发中，我们直接依赖或者间接依赖了新的 JSON 解析器，例如下面这种方式就依赖了Jackson：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">&lt;dependency&gt;</span></div><div class="token-line"><span class="token plain">         &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;</span></div><div class="token-line"><span class="token plain">         &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;</span></div><div class="token-line"><span class="token plain">         &lt;version&gt;2.9.6&lt;/version&gt;</span></div><div class="token-line"><span class="token plain">     &lt;/dependency&gt;</span></div></pre></div><p>诸如此类问题，一般不会出现严重的问题，但是你一定要意识到，当你的代码不变时，你的依赖变了，行为则可能“异常”了。</p><h2 id="通用错误"><a aria-hidden="true" tabindex="-1" href="/blog-java/spring编程常见错误50例/04.spring补充篇/07#通用错误"><span class="icon icon-link"></span></a>通用错误</h2><p>实际上，除了上面的一些原因外，还有不少错误是所有类似Spring框架都要面对的问题。例如，处理一个HTTP请求，Path Variable 含有特殊字符/时，一般都会有问题，大多需要额外的处理。我们可以复习下<a target="_blank" rel="noopener noreferrer" href="https://time.geekbang.org/column/article/373215">第9课<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的案例1。</p><p>在解析一个 URL 时，我们经常会使用到@PathVariable 这个注解。例如我们会经常见到如下风格的代码：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">@RestController</span></div><div class="token-line"><span class="token plain">    @Slf4j</span></div><div class="token-line"><span class="token plain">    public class HelloWorldController {</span></div><div class="token-line"><span class="token plain">        @RequestMapping(path = &quot;/hi1/{name}&quot;, method = RequestMethod.GET)</span></div><div class="token-line"><span class="token plain">        public String hello1(@PathVariable(&quot;name&quot;) String name){</span></div><div class="token-line"><span class="token plain">            return name;</span></div><div class="token-line"><span class="token plain">            </span></div><div class="token-line"><span class="token plain">        };  </span></div><div class="token-line"><span class="token plain">    }</span></div></pre></div><p>当我们使用 <a target="_blank" rel="noopener noreferrer" href="http://localhost:8080/hi1/xiaoming">http://localhost:8080/hi1/xiaoming<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 访问这个服务时，会返回&quot;xiaoming&quot;，即 Spring 会把 name 设置为 URL 中对应的值。</p><p>看起来顺风顺水，但是假设这个 name 中含有特殊字符/时（例如 <a target="_blank" rel="noopener noreferrer" href="http://localhost:8080/hi1/xiaoming">http://localhost:8080/hi1/xiao/ming<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ），会如何？如果我们不假思索，或许答案是&quot;xiao/ming&quot;？然而稍微敏锐点的程序员都会判定这个访问是会报错的。</p><p>这个案例其实你换别的HTTP服务框架也可能需要处理，这种问题就是一些通用的问题，并不是因为你使用Spring才出现的。</p><p>通过思考上述错误根源，其实你应该相信了，除了学艺不精之外，还有一部分原因在于我们的“武断”和Spring的好用。也正因为它的好用，让我们很少去思考它的内部运作机制，当我们大刀阔斧地到处使用Spring时，可能不小心就踩坑了。所以当你使用Spring时，不妨大胆假设、小心求证，多看看别人犯的错误，多总结总结最佳实践。这样才能一劳永逸，更加熟练和自信地使用Spring！</p></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/GGwujun/blog/edit/master/ssrc/spring编程常见错误50例/04.Spring补充篇/07.md">在 GitHub 上编辑此页<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="最后更新时间：">2023/9/27 11:06:36</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script>
      (function () {
        if (!location.port) {
          (function (i, s, o, g, r, a, m) {
            i["GoogleAnalyticsObject"] = r;
            (i[r] =
              i[r] ||
              function () {
                (i[r].q = i[r].q || []).push(arguments);
              }),
              (i[r].l = 1 * new Date());
            (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m);
          })(
            window,
            document,
            "script",
            "//www.google-analytics.com/analytics.js",
            "ga"
          );
          ga("create", "UA-149864185-1", "auto");
          ga("send", "pageview");
        }
      })();
    </script>
    <script src="/blog-java/umi.fde43fdb.js"></script>
  </body>
</html>
